%\chapter{det-comp}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{Anode Plane Assemblies}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{Cathode Plane Assemblies}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{Field Cage}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\section{HV components}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{TPC Front-end Electronics}
%\chapter{Cold Electronics}
\label{ch:ce}

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Introduction}
\label{subsec:ce_intro}

\begin{cdrfigure}[The front-end electronics mounted on an APA]{tpcce_FEMBonAPA}{The 
front-end electronics as mounted on an APA.
  {\bf Top:} The front-end electronics is shown in the red circle.
  {\bf Bottom:} Cross section view. Mounting hardware between the front-end electronics 
and the APA fin is not shown.}
\includegraphics[width=0.8\linewidth]{tpcce_CMBonAPA_1.pdf}
\includegraphics[width=0.8\linewidth]{tpcce_CMBonAPA_2.pdf}
\end{cdrfigure}

The TPC read-out electronics are referred to as the ``Cold Electronics'' (CE) because they will reside in LAr,
mounted directly on the APA front-end (Figure~\ref{fig:tpcce_FEMBonAPA}).
This will minimize channel capacitance and noise by keeping the length of the connection between an anode wire
and its corresponding electronics input to an absolute minimum.
The CE will be implemented as ASIC chips using CMOS technology,
which performs well at cryogenic temperatures,
and will provide amplification, shaping, digitization, buffering, and multiplexing (Mux) of the signals.
Because it is not possible to form a trigger for some important measurements,
such as proton decay and supernova bursts, the CE will be continuously read out,
with a digitized ADC sample from each APA channel (wire) every 500~ns.

The 2,560 channels from each APA are read out by 20 Front-End Motherboards (FEMBs), each providing 
digitized wire read-out of 128 channels. A single front-end board is shown in Figure~\ref{fig:tpcce_FEMBonAPA}.
For each of the six APAs in the protoDUNE cryostat, one cable bundle will 
connect from each FEMB to the outside of the cryostat via a feedthrough to a CE flange, with one 
feedthrough/flange servicing one APA as shown in Figure~\ref{fig:tpcce_apa_flange}, for a total 
of 20 cold cable bundles per APA. 
Each of these cable bundles consists of wires for low-voltage power, links for high-speed 
data out, and clock/digital-control IOs. Eight other cables carry the TPC wire-bias voltage 
from the CE flange to the APA wire-bias boards.

\begin{cdrfigure}[Connections between CE flange and APA]{tpcce_apa_flange}{Connections between
the CE flange and APA.}
\includegraphics[width=0.4\linewidth]{tpcce_apa_flange.pdf}
\end{cdrfigure}

The scope of the CE subsystem includes the design, procurement, fabrication, testing,
delivery, and installation of the CE, the components of which are:
\begin{itemize}
\item Front-end mother boards (FEMBs) which include the cold ASICs, installed on the APAs
\item Data, clock/control IO, and LV and wire-bias power cables 
between the APA and the CE flanges (cold cable)
\item Signal feedthroughs and CE flanges which pass the data, clock/control IO, 
low-voltage power, and APA wire-bias voltage between warm and cold
\item Warm electronics crates (WECs) mounted on the CE flanges, which act as Faraday cages with
only optical fibers to slow control and the DAQ, and which contain the Warm Interface Boards (WIBs)
\item Data and clock/control IO fiber cable between the WEC and the data aquisition 
(DAQ) and slow control systems
\item LV and wire-bias power cables between the CE flange and external power supplies
\item Low-voltage supplies for the CE and bias-voltage supplies for the APAs
\end{itemize}

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Design Considerations} 
\label{subsec:ce_reqs_n_specs}

The requirements for the CE can be found in the requirements documentation 
in section~\ref{sec:detector_requirements}
The most significant ones are listed here. The CE shall:

\begin{itemize}	
\item Provide the means to read out the TPCs and transmit their data in a useful format to the DAQ.
\item Operate for the life of the facility without significant loss of function.
\item Record the channel waveforms continuously without dead time.
\item Use only materials that are compatible with high-purity liquid argon.
\item Provide sufficient precision and range in the digitization to:
\begin{itemize}
\item Discriminate electrons from photon conversions;
\item Optimize for high- and low-energy tracks from accelerator-neutrino interactions;
\item Distinguish a Minimum Ionizing Particle (MIP) from noise with a signal-to-noise ratio $>$ 9:1;
\item Measure the ionization up to 15 times that of a MIP particle, so that stopping kaons from proton decay can be identified.
\end{itemize}
\item Ensure that all power supplies have: 
\begin{itemize}
\item Local monitoring and control
\item Remote monitoring and control through DAQ
\item Over-current and over-voltage protection circuits
\end{itemize}
\item Ensure that the signal feedthroughs are able to withstand twice their nominal operating voltages 
with a maximum specified leakage current in 1-atm argon gas.
\end{itemize}

%The responsibility and authority for the design, installation 
%and use of the detector quiet-power distribution and 
%detector-grounding system is held by the subproject electrical engineer. 
%This engineer has oversight responsibility for all electrical and electronics 
%design and installation tasks, including all attachments to the detector 
%that create an electrical connection. 

By ensuring that the electrical cables for each APA enter the cryostat through single 
independent feed-through penetrations, the TPC APA, cold electronics read-out, CE flange, 
and Faraday cage Warm Electronics Crate for each independent APA are an integrated whole
read-out unit. Each unit will provide local diagnostics for noise and validation testing,
and follow the grounding and shielding guidelines in the next section.

\subsubsection{Electrical Design Guidelines}
\label{subsec:ele_design}

To avoid structural ground loops, the APA frames described in Section~\ref{subsec:apa_frame} 
are insulated from each other. Each frame is electrically connected to the cryostat at a single 
point, where cold cables exit the cryostat signal feed-through. Mechanical suspension of the APAs 
is accomplished using insulated supports. 

The FEMB include an analog motherboard with eight Front-End (FE) ASICS configured as 16-channel 
digitizing charge amplifiers. Input amplifiers on the ASICs have their Common terminals connected 
to the APA frame. These connections are made through the CE Faraday box described in 
Section~\ref{subsubsec:ce_faraday_box} and its mounting brackets. All power-return leads and all cable shields 
involving the CE are connected to the Common plane of the FEMB, as well as to the CE flange.

Bias filters are locally referenced to the Common plane of the FEMBs through low-impedance 
electrical connections. This approach keeps the ground-return path in close proximity to the 
bias-voltage and signal paths. Close proximity for the current paths minimizes loop areas to 
suppress noise pickup.

Photon Detector signals, described in Section~\ref{sec:pd_system}, are carried on shielded 
twisted pairs to a photon detector flange in the cryostat. The shields are connected to the 
cryostat at the PD flange, and to the PCB shield layer on the photon detectors. There is no 
electrical connection between the cable shields and the APA frame except at the PD flange.

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{APA Wire Bias}
\label{subsec:ce_wire_bias}

Each side of an APA includes four wire layers as described in Section~\ref{subsec:apa_phys_desc}. 
The inner-most X-plane layer of wires is nominally biased at +820 Volts, with each wire coupled 
to a charge amplifier in an FEMB. The V-plane layer of wires is effectively biased at zero volts, 
with each wire directly connected to a FE charge amplifier. The U-plane wire layer is nominally 
biased at -370 Volts with each wire coupled to a FE charge amplifier. The outer-most G-plane layer,
which is not connected to the FE charge amplifiers, is biased at -665 Volts.

Electrons passing through the wire grid must drift unimpeded until they reach the X-plane 
collection layer. The nominal bias voltages are predicted to result in an electrically 
transparent structure.

\subsubsection{Bias Components}
\label{subsec:ce_bias_comp}

For the wire layers, bias resistors and filter capacitors are mounted on CR boards that plug 
into the APA wire-board stacks, as described in Section~\ref{subsubsec:apa_wire_wrap}. The CR boards 
also plug directly into the FEMBs and make the electrical input to the FE amplifiers.

Each CR board includes two R-C filters for the X and U bias voltages, as shown 
in Figure~\ref{fig:tpcce_cr_board}. Additionally there are 48 
pairs of bias resistors and coupling capacitors for X-plane wires, and 40 resistor and 
capacitor pairs for the U-plane wires. The coupling capacitors block DC while passing AC 
signals to the CE motherboards.

\begin{cdrfigure}[APA wire bias schematic diagram]{tpcce_cr_board}{APA wire bias 
schematic diagram, including the Capacitance-Resistance (CR) board.}
\includegraphics[width=1.0\linewidth]{tpcce_cr_board.pdf}
\end{cdrfigure}

A separate grid-plane CR board includes a bias voltage noise filter and twelve pairs of 
bias resistors and filter capacitors. Groups of four wires are tied together to share a 
bias resistor and filter capacitor. 

Input amplifiers are referenced to the Common plane of the FEMB, which is locally connected 
to the APA frame through the CE Faraday box described in Section~\ref{subsubsec:ce_faraday_box}. The amplifiers 
have input impedance of 50 Ohms with 22-nF coupling capacitors, as shown in Figure~\ref{fig:tpcce_cr_board}. 
Clamping diodes limit the amplifier input voltage to between zero and +1.8 Volts.

\subsubsection{Bias Component Values}
\label{subsec:bias_comp_values}

Coupling capacitors for the X-plane and U-plane wires are required to block DC bias voltages. However they also impact the efficiency of the detector circuits. The sense wires are expected to have 200 pF of capacitance to the APA frame. Induced or collected charges are effectively divided between the wire capacitance and the coupling capacitor. To achieve a charge-calibration accuracy of 0.5 percent or better, the coupling capacitors must be 4.7 nF at ten percent tolerance, or 2.2 nF at five percent tolerance. Voltage ratings should be at least 1.5 times the expected operating voltages.

Bias resistance values should be at least 20 Meg-ohms to maintain negligible noise contributions. A target value of 50 Meg-ohms is desired. The higher value helps to achieve a longer time constant for the high-pass coupling networks. Time constants should be at least 25 times the electron drift time so that undershoot in the digitized waveform is small and easily correctable. However, leakage currents can develop on PC boards that are exposed to high voltages over extended periods. If the bias resistors are much greater than 50 Meg-ohms, leakage currents may affect the bias voltages applied to the wires.

The bias-voltage filters are R-C low-pass networks. Resistance values should be much smaller than the bias resistances to control crosstalk between wires and limit the voltage drop if any of the wires becomes shorted to the APA frame.  A value around 2.2 Meg-ohms is desired. Smaller values may be considered although a larger filter capacitor would be required to maintain a given level of noise reduction. A target value of 47 nF has been established for the filter capacitors.

For the grid-plane bias filters, component values are less critical. If possible they will be identical to those used for the bias resistors and coupling capacitors (50 Meg-ohms and 2.2 to 4.7 nF, respectively.

Voltage ratings for the bias resistors and coupling capacitors, as well as their resistance and capacitance values, are limited by available space on the CR boards. The board area is limited by the width of the wire boards and the distance between the APA frame and the CE Faraday box.  Initial layouts have determined that the maximum possible size for the 88 bias resistors that must fit on each CR board is 0.12 x 0.25 inches (3.0 x 6.0 mm). Resistors with this footprint are readily available with a voltage rating of 2.0 kV. The maximum size for the 88 coupling capacitors on each CR board is 0.22 x 0.25 inches (5.6 x 6.0 mm). Capacitors with a voltage rating of 2.0 kV are available with capacitance of 3.9 nF at five percent tolerance.

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Front-End Mother Board}
\label{subsec:fe_arch}

The CE architecture is manifested in the Front End Mother Board (FEMB) assembly,
which consists of an analog mother board with a digital ASIC mezzanine (Figure~\ref{fig:tpcce_schem}).
Each APA is instrumented with 20 FEMBs, for a total of 2,560 channels per APA. The FEMB plug
directly into the APA CR boards, making the connection from the U and V induction wires and 
Z collection wires to the FE charge amplifiers as short as possible.

The analog mother board is instrumented as a 128-channel board which uses eight 16-channel FE ASICs,
eight 16-channel ADC ASICs, low-voltage regulators, and input-signal protection.
The 16-channel FE ASIC provides amplification and pulse shaping.
The 16-channel ADC ASIC comprises a 12-bit digitizer at 0.5, 1, or 2 MS/s, local buffering,
and an 8(analog):1(digital) Mux stage with two pairs of serial readout lines in parallel.
The FEMB have already been prototyped and tested,
using a commercial FPGA to perform the role of the digital ASIC (Figure~\ref{fig:tpcce_CMBpix}).

\begin{cdrfigure}[The CE Architecture]{tpcce_schem}{The CE Architecture. The basic unit is the 128-channel FEMB.}
\includegraphics[width=0.9\linewidth]{tpcce_schem.pdf}
\end{cdrfigure}

\begin{cdrfigure}[The Front End Mother Board (FEMB), as used in an early set of tests]{tpcce_CMBpix}
{The Front End Mother Board (FEMB), as used in the early set of tests.
  {\bf Top:} The analog mother board, showing four ADC ASICs and four FE ASICs surface mounted.
  The other side of the board has another four ADC and FE ASICs.
  Except for anticipated small modifications, this board is essentially the final version.
  {\bf Middle:} The FPGA mezzanine, used in place of the digital ASIC mezzanine for the early set of tests.
  {\bf Bottom:} The complete FEMB assembly as used in the early set of tests.
  The cable shown in the high-speed data, clock, and control cable.}
\includegraphics[width=0.65\linewidth]{tpcce_CMBpix_1.pdf}
\includegraphics[width=0.65\linewidth]{tpcce_CMBpix_2.pdf}
\includegraphics[width=0.45\linewidth]{tpcce_CMBpix_3.pdf}
\end{cdrfigure}

The Cold Digital Data (COLDATA) ASIC and its voltage regulators are mounted on the digital ASIC mezzanine.
The COLDATA ASIC provides:
\begin{itemize}
\item The communication protocol with the DAQ
\item The control required to program and read out the FE and ADC ASICs
\item The system clock interface
\item Four 4:1 Muxs that combine 16 serial lines from the ADCs of eight 
channels each into four serial lines of 32 channels each
\item Four 1.28-Gbps serial drivers that form the data link to the DAQ via the WIB
\end{itemize}
For the ProtoDUNE detector the COLDATA ASIC, which is still in development, will be 
emulated by an FPGA which will reproduce the clock/control IO, data multiplexing,
and 1.28~Gbps serial drivers.
In either case, the data rate will not be high enough to require the use of optical fibers in the cold,
nor is there a need for zero suppression or data compression.
This greatly reduces the complexity of the COLDATA ASIC, with a corresponding decrease in overall risk,
including risk of failure-to-implement (within a fixed schedule and budget)
and risk of device failure during long-term operation.
Data will be driven to the CE flange through copper cable utilizing low-voltage differential signaling (LVDS).
At the CE flange, the data will be further multiplexed by 4:1 and transmitted over optical
fiber to the DAQ (RCE or FELIX) described in section~\ref{sec:DAQ_online_interface}.

The analog FE ASIC has 16 channels.
Each channel includes a charge amplifier with a gain selectable from one of 4.7, 7.8, 14 and 25~mV/fC
(full scale charge of 55, 100, 180 and 300~fC),
a high-order anti-aliasing filter with adjustable time
constant (peaking time 0.5, 1, 2, and 3 $\mathrm{\mu}$s),
an option to enable AC coupling,
and a baseline adjustment for operation with either the collecting (200~mV) or the non-collecting (900~mV) wires.
The 16-channel FE ASICs then transmit the shaped pulse to a 16-channel 12-bit 2~MS/s ADC ASIC.
Shared among the 16 channels in the FE ASIC are the bias circuits, programming registers,
a temperature monitor, an analog buffer for signal monitoring, and the digital interface.
The estimated power dissipation of FE ASIC is about 6~mW per channel at 1.8~V supply.
Shared among the 16 channels in the ADC ASIC are the bias circuits, programming registers,
an 8:1 Mux, and the digital interface
The estimated power dissipation of FE ASIC is below 5~mW per channel at 1.8~V supply.


%%%%%%%%%%%%%%%%
\subsection{CMOS Circuit Design}
\label{subsec:fe_CMOS}

Compared to the situation at 300~K, charge-carrier mobility in silicon increases at 89~K
while thermal fluctuations decrease with $kT/e$.
These effects result in a higher gain (transconductance/current ratio = $g_{m}/ i$), higher speed, and lower noise
at 89~K than at 300~K.
For a given drain-current density, the same degree of impact ionization (measured by the transistor substrate current)
occurs at a somewhat lower drain-source voltage at 89~K than at 300~K.
The charge trapped in the gate oxide and its interface with the channel causes degradation in the transconductance (gain)
of the transistor and a threshold shift.
The former is of major consequence as it limits the effective lifetime of the device
(defined in industry and the literature as 10\% degradation in transconductance).
Thus, an MOS transistor has equal lifetime due to impact ionization at 89~K and at 300~K,
but at different drain-source voltages $V_{DS}$,
as illustrated in Figure~\ref{fig:tpcce_LifetimetestVR}.  
This property can be exploited to stress the transistor with both increased current
and increased voltage while monitoring the substrate current and the change in $g_{m}$ due to impact ionization.
Under these conditions, the lifetime can be reduced arbitrarily by many orders of magnitude,
and the limiting operating conditions for a lifetime in excess of $\sim$20 years can be determined.
With this foundation, more conservative design rules (lower current densities and voltages)
can be derived and applied in the ASIC design.
With this accelerated testing the expected lifetimes can be verified for the several
widely available CMOS technologies under consideration (TSMC, IBM, AMS).
It should be noted that this is a standard test method used by the semiconductor industry;
it is used to qualify electronics for deep space NASA missions as well as commerical PCs.
 
\begin{cdrfigure}[Lifetime at different temperatures vs V$_{DS}$]{tpcce_LifetimetestVR}{Lifetime at different temperatures vs V$_{DS}$}
\includegraphics[width=0.9\textwidth]{tpcce_LifetimetestVR.pdf}
\end{cdrfigure}

To successfully design CMOS circuits that will operate at cryogenic 
temperatures, two critical issues must be addressed and resolved. 
The first issue is the need for realistic models at the operating temperature 
of all active and passive components in order to reliably predict operating points,
signal response and noise during the design process.
The second issue is that the design must ensure a long operational lifetime, since once the TPC is filled 
with LAr the far detector must operate for about 15~years without any access to the 
electronics for repair or replacement.
Concerning the availability of realistic models, 
our preliminary results from the cryogenic characterization (down to 40 K) of a complete 
mixed-signal ASIC in a commercial CMOS 0.25~$\mu$m technology, 
originally developed for room-temperature applications, indicates that the models 
are useful to first order.
To refine these models, several 
single-transistor test structures were fabricated on the first prototype of the 0.18~$\mu$m device. 
Measurements of the properties of these structures at cryogenic temperatures 
have been used to refine the device models at 89~K. 

The lifetime of CMOS circuits is limited by several mechanisms which degrade 
the performance over time, eventually causing the circuit to fail to perform as specified. 
The rates of most degradation mechanisms in CMOS, such as electro-migration (EM), 
stress migration (SM), time-dependent dielectric breakdown (TDDB), thermal cycling (TC), 
and negative bias-temperature instability (NBTI), all scale with temperature such that 
cryogenic operation is favored. The only mechanism 
that could affect the lifetime at cryogenic temperature is the degradation due to 
impact ionization, which causes charge trapping in the MOSFET gate oxide at 
large drain-current densities (the ``Hot Carrier'' effect).
Results from a CMOS reliability study
provide general design guidelines (for device geometry, bias and current density) 
that should guarantee a lifetime well in excess of 15~years for continuous cryogenic operation. 
These design guidelines also provide information for designing test conditions to observe the 
deterioration mechanism and to extrapolate from accelerated deterioration rates, 
measured under stressed conditions within practical times, to the ultimate lifetime under normal operation.

A monitor of the impact ionization is the bulk current, which reaches a maximum at $V_{DS} = V_{DD}$ and at $V_{GS} = 0.5 V_{DD}$.
When operating constantly in this condition at room temperature, a properly designed device 
will typically have a lifetime (defined as a 10\% degradation in $g_m$) of about 10~years. 
The bulk current (i.e., the impact ionization) increases by roughly a factor of four from 300~K to 77~K 
and a circuit designed for operation at room temperature would have 
a proportionately shorter useful life at cryogenic temperature. As stated above, in order to guarantee 
the required lifetime at cryogenic temperatures, design guidelines must be modified for both analog 
and digital circuits. For analog circuits, this is done by operating the devices at moderate-to-low 
drain current densities, where impact ionization becomes negligible. 
%
For digital circuits, 
operating the devices with reduced $V_{DD}$ (about 20\%) and using non-minimum channel length L
is easily accommodated since at cryogenic temperature the speed of the digital circuit increases, 
compensating for the increased L.
%
These guidelines will be verified with accelerated aging tests, 
at increasing values of $V_{DD}$, on dedicated structures. Such tests also will be conducted on 
prototype samples throughout the development process to verify the long-term reliability of the final ASICs.

%
%%%%%%%%%%%%%%%%
\subsubsection{Cold Analog ASICs}
\label{subsubsec:fe_CMOS_analog}

The development of the readout ASIC began by designing and fabricating in a commercial CMOS
process (0.18~$\mu$m and 1.8V) a 16-channel ASIC implementing the complete analog front-end section.
The FE ASIC layout is shown in Figure~\ref{fig:tpcce_FE_ASIC}.
This process is expected to be available for at least another 10~years. 
The charge amplifier input MOSFET is a p-channel biased at 2~mA with a L/W (channel length/width) ratio
of 0.27~$\mu$m / 10~$\mu$m, followed by dual cascade stages.
The charge amplification and shaping filter have digitally programmable gain and peaking time
(as listed in Section~\ref{subsec:fe_arch}).
Each channel also implements a high-performance output driver,
which is used to drive a long cable when it is used in a standalone mode, as it is in MicroBooNE.\cite{noise_filter}
The buffer can be disabled when it is interfaced to an ADC ASIC to reduce the power consumption.
The ASIC integrates a band-gap reference (BGR) to generate all the internal bias voltages and currents.
This guarantees a high stability of the operating point over a wide range of
temperatures, including cryogenic.
The ASIC is packaged in a commercial, fully encapsulated plastic QFP 80 package.

\begin{cdrfigure}[The layout of the 16-channel analog FE ASIC]{tpcce_FE_ASIC}{The layout of the 16-channel analog FE ASIC}
\includegraphics[width=\linewidth]{tpcce_FE_ASIC_pinout.jpg}
\end{cdrfigure}

This ASIC has now been through six design/fabrication/testing revision cycles; the latest data sheet is DUNE-doc-1484.
Prototypes from each cycle have been evaluated and characterized at room (300~K) and liquid nitrogen (77~K) temperatures.
During these tests the circuits have been cycled multiple times
between the two temperatures and operated without any change in performance.
Figure~\ref{fig:tpcce_shaper_out} shows the measured pulse response, along with
details on the adjustability of the gain, peaking time and baseline.
These results are in close agreement with the simulations and indicate
that both the analog and the digital circuits and interface operate as
expected in a cryogenic environment.

Also reported in Figure~\ref{fig:tpcce_shaper_out} are the outputs of the BGR and temperature sensor,
which are in close agreement with the simulations as well.

\begin{cdrfigure}[Measured pulse response with details]{tpcce_shaper_out}{Measured pulse response with details on gain, peaking time and baseline adjustments}
\includegraphics[width=\linewidth]{tpcce_shaper_out.pdf}
\end{cdrfigure}

\begin{cdrfigure}[Measured ENC vs filter time constant]{tpcce_enc}{
Measured ENC vs filter time constant from the latest version of the analog front end ASIC
for two different gains, 14~mV/fC and 25~mV/fC.}
\includegraphics[width=4in]{tpcce_enc_14mV.jpg}
\includegraphics[width=4in]{tpcce_enc_25mV.jpg}
\end{cdrfigure}

Figure~\ref{fig:tpcce_enc} shows the measured ENC versus filter-time constant (peaking time) for two different gains.
At 1~$\mu$s about 650 e$^{-}$ was measured, to be compared to the simulated value of 500 e$^{-}$.
The difference is mainly due to the thermal noise from a $\sim$11-ohm parasitic resistance of the input
line (shown in the detail of Figure~\ref{fig:tpcce_enc}), which contributes about 350 electrons at 77~K.
The width of the line has been increased in a revision in order to make this contribution negligible.
A second contribution, on the order of 100 e$^{-}$,
was due to the dielectric loss from the capacitor (220~pF) used to simulate the wire
(the cases of MICA and NPO ceramic were compared).
This contribution would not be present with the input connected to a sense wire in the TPC.

Each channel is equipped with an injection capacitor which can be used
for test and calibration and can be enabled or disabled through a
dedicated register. The injection capacitance has been measured using 
a calibrated external capacitor. The measurements show
that the calibration capacitance is extremely stable, changing from
184~fF at room temperature to 183~fF at 77~K. This result and the measured
stability of the peaking time demonstrate the high stability of the
passive components with the temperature. Channel-to-channel and chip-to-chip
variation in the calibration capacitor are typically less than 1\%. Measurements are being carried
out on the individual test structures fabricated on this ASIC to
confirm device models and design guidelines.

% 2015-02-27 chc: ADC ASIC is below
The development of the ADC ASIC is also using the CMOS process (0.18~$\mu$m and 1.8V).
A 16-channel ASIC has been prototyped and tested.
The layout of the ADC ASIC is shown in Figure~\ref{fig:tpcce_ADC_ASIC}. 
The ADC ASIC has 12-bit resolution, options for 0.5, 1, and 2~MS/s sampling rate, built in FIFO, 
two 8:1 multiplexing and two pairs of serialized output.
The ADC is a complex design, which has 320,000 transistors, while the FE has 16,000.
All of the transistor design has been done following the rules for long cryo-lifetime.

\begin{cdrfigure}[The layout of the 16-channel ADC ASIC]{tpcce_ADC_ASIC}{The layout of the 16-channel ADC ASIC}
\includegraphics[width=\linewidth]{tpcce_ADC_ASIC_pinout.jpg} % New one
\end{cdrfigure}

The ADC ASIC has an input buffer with offset compensation to match the output of the FE ASIC.
The input buffer first samples the input signal (with a range of 0.2~V to 1.6~V),
then provides a current output after compensating for offset voltage error.
This current output is then supplied to the ADC which converts the input to digital in two phases.
The MSB (Most Significant Bit) 6~bits are first determined followed by the LSB (Least Significant Bit) 6~bits.
After the conversion the thermometer code is converted to binary and latched.
The output of ADC 16 can be monitored externally.
The data from the 16 ADCs is transferred in parallel to the FIFO block.
The built-in FIFO is 32~bits wide and 192~bits long,
it has the full and empty indicator flags to make it easy to interface to FPGA or digital ASIC.
The ADC along with the input buffers are biased internally using a bias generator and a bandgap voltage reference.
The bandgap voltage (VBGR) can be monitored and/or controlled externally.
It can be put in the low-power sleep mode, and woken up in less than 1~$\mu$s.

The ADC ASIC has now been through seven design/fabrication/testing revision cycles, 
the latest data sheet is DUNE-doc-1485.
Prototypes from each cycle have been evaluated and characterized at room (300~K) and liquid nitrogen (77~K) temperatures.
During these tests the circuits have been cycled multiple times.
The effective resolution with reference to the input referred noise is $\sim$11.6~bits at both 300~K and 77~K.
The differential non-linearity (DNL) is less than 4 LSBs for 99\% of ADC bins at both 300~K and 77~K.
The performance of the ADC meets the far detector requirements.

An analog front-end ASIC was adopted by the MicroBooNE experiment in 2010.\cite{noise_filter}
The fabrication and installation was successfully completed in early 2014, and now 
a total of 8,256 channels (516 FE ASICs in the LAr) instrument the MicroBooNE TPC. 
A total of 2,048 channels (128 FE ASICs and 128 ADC ASICs on 16 FEMBs in the LAr) instrument the 35-ton 
TPC, which has completed its data-taking.


%
%%%%%%%%%%%%%%%%
\subsubsection{Cold Digital Data ASICs}
\label{subsubsec:fe_CMOS_digital}

The development of the Cold Digital Data (COLDATA) ASIC will follow the same general 
guidelines developed for the cold analog ASICs,
but will differ from the analog design in a couple of aspects.
It is anticipated that the digital ASIC will make use of a 65-nm CMOS technology and require a
digital library with accurate cold timing models allowing for high-level language design and
automated place-and-route for design blocks using extensive digital logic.

\begin{cdrfigure}[Functional Block Diagram of the Cold Digital Data (COLDATA) ASIC]{tpcce_COLDATA}{Functional Block Diagram of the Cold Digital Data (COLDATA) ASIC.}
\includegraphics[width=6in]{tpcce_COLDATA.pdf}
\end{cdrfigure}

A block diagram of the COLDATA ASIC is presented in Figure~\ref{fig:tpcce_COLDATA}.
The major components of the COLDATA ASIC include a downlink which is required to receive the system clock and
the control/download information transmitted from the DAQ.
The download data must be transmitted to the FE and ADC ASICs on the FEMB.
The system clock will provide a frequency reference to a crystal-based Phase Lock Loop (PLL)
which will generate a low-jitter stable clock to the high-speed serializer.

Two COLDATA ASICs on each FEMB will also be receiving the data from each of the eight ADCs on a board.
Each ADC will transmit two streams of data at 192~Mbps for a total data input of 3.072~Gbps.
All data will be transmitted off-board to the DAQ.
Twelve bits of ADC data per APA channel every 500~ns yields a single-channel bit rate of 0.024~Gbps.
With 8B10B encoding, for example, this increases to 0.03~Gbps, plus some overhead for frame 
data to indicate event blocks.
Assuming a conservative serial-link transmission speed of 1.28~Gbps, 
a single link can therefore handle 32 channels.
Thus, it is planned to drive four 1.28~Gbps links from each COLDATA ASIC.
A line driver will be designed that is capable of driving a copper link for the approximate 25~m required
to exit the LAr in the 10~kT DUNE far detectors.

For the ProtoDUNE detector, the COLDATA mezzanine boards, which are still being developed, will be
replaced by an FPGA mezzanine (Figure~\ref{fig:tpcce_CMBpix}) 
which will reproduce the clock/control IO, data multiplexing, and 1.28~Gbps serial drivers.

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsubsection{Faraday Box and Interface to APA}
\label{subsubsec:ce_faraday_box}

Each FEMB will be enclosed in a Faraday box to provide shielding from noise, and to mount the FEMB 
to the APA. The current concept for Faraday box mounting is shown in Figure~\ref{fig:tpcce_box}.

\begin{cdrfigure}[Faraday box for the FEMB]{tpcce_box}{Faraday box for the FEMB.}
\includegraphics[width=3in]{tpcce_box_1.pdf}
\includegraphics[width=3in]{tpcce_box_2.pdf}
\end{cdrfigure}


\fixme{need more details. Ask Manhong.}

%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Signal Feedthroughs and Cold Cable}
\label{subsec:ce_feedthrough}

A signal feedthrough will pass the signals, supply voltages, and control lines from the warm to the cold.
The TPC data rate per APA, using the full event-buffer scheme described earlier,
is sufficiently low that it is within the capability of a single LVDS channel on copper,
with an overall 32:1 Mux and 80 LVDS channels per APA.
There is, therefore, no need for high-speed optical links inside the 
cryostat, so all cables inside the cryostat will be copper.
This has the significant benefit of avoiding a major R\&D effort which would be required to demonstrate
both functionality and adequate lifetime of optical converters in LAr.
In addition to the high-speed data-output channels,
LVDS connections will be made to each APA to distribute a clock signal and control information.
These data can be transmitted at a lower bit rate.
Optical fiber will be employed externally from the CE flange to the DAQ systems and slow control.

%
%%%%%%%%%%%%%%%%
\subsubsection{Signal Feedthroughs}
\label{subsubsec:ce_feedthroughs}

\begin{cdrfigure}[Conceptual design of signal/power feedthrough]{tpcce_signal_FT}{TPC signal/power feedthrough.}
\includegraphics[width=2.75in]{tpcce_signal_FT_1.jpg}
\includegraphics[width=4in]{tpcce_signal_FT_2.jpg}
\end{cdrfigure}

The design for the signal feedthroughs is complete except for some small adjustments,
which are expected to be complete by October 2016.
ProtoDUNE has been developing in tandem with the SBND experiment because of the very similar feedthrough needs.
The current ProtoDUNE design of the signal feedthrough includes a T-shaped pipe, CE flange, and warm electronics crate, as shown in Fig.~\ref{fig:tpcce_signal_FT}.

All LV and data cables inside the cryostat will be attached to their corresponding feedthroughs 
distributed throughout the cryostat roof via flange PCB boards that make the electrical connection
between the cable and warm electronics. The wire-bias voltage cables will connect to the standard SHV
connectors machined directly into the flange, so there will be no electrical connection between 
the LV and data connectors and bias voltage.
The other ends of the data and LV cables will be connected to the matching connectors on the FEMBs in the cryostat.
Based on a standard 14-in conflat flange,
each of these feedthroughs will serve the bias/power/digital IO needs of one APA, as shown 
in Figure~\ref{fig:tpcce_cable_routing}.  

\begin{cdrfigure}[TPC cable routing scheme]{tpcce_cable_routing}{TPC cable routing scheme for three APA section.}
\includegraphics[width=0.9\linewidth]{tpcce_cable_routing.pdf}
\end{cdrfigure}

% All data, control, bias and power supply lines will be duplicated to
% provide redundancy to avoid the loss on an entire APA.
% Two APAs will be cabled to one feedthrough in ``chimneys'' in the roof of the cryostat that
% contain the support rods for the TPC planes.

For the protoDUNE detector APA there will be 20 electronics boards.
While the electrical connection requirements are straightforward,
the reliable gas tightness of the flange with an embedded circuit board has been fully verified.
Also the planned method of reducing contamination from the cable plant in the ullage
(the warmer gas phase at the top of the cryostat) 
continues to be carefully studied.

Measurements in the Materials Test Stand at Fermilab (described in Section 7.2 of the LBNE Closeout document).
have shown that impurities (principally O$_2$ and H$_2$O) embedded in objects submerged in the liquid argon do not result
in a decrease in electron-drift lifetime, whereas impurities in objects located in the ullage do.
This indicates the importance of minimizing the amount of material in the ullage.

%
%%%%%%%%%%%%%%%%  
\subsubsection{Data/Control Cable Bundles}
\label{subsubsec:ce_data_cable}

Data/Control cable bundles will be used to send system clock and control signals in the LAr from the 
CE flange to the FEMB, stream the 1~Gbps high-speed data from the FEMB to the CE flange, and 
provide backup JTAG programming to the cold FPGA, in case the power-up programming fails to 
load from the onboard EEPROM. As described in Section~\ref{subsec:ce_intro}, each FEMB will 
connect to a CE flange via one data cable bundle, for 20 bundles between one APA and one flange.
Each data bundle will contain 12 low-skew Copper twin-axial cables with a drain wire, 
to transmit the following differential signals:

\begin{itemize}
    \item 4$\times$1.28~Gbps high-speed data
    \item One 50~MHz system clock
    \item One 2~MHz CONVERT clock
    \item 2 I2C control and configure (3 for COLDATA)
    \item 4 single-ended JTAG programming for the FPGA (not used for COLDATA)
\end{itemize}

Note that when the cold FPGA is replaced with the COLDATA ASIC, there
is a small change in signal assignments required, with one pair of
JTAG signals reassigned to the ``I2C-Like'' COLDATA slow control
interface, which uses three LVDS pairs, so that COLDATA will only
require 9 differential signals.

\begin{cdrfigure}[Samtec LV and data cable]{tpcce_samtec_cable}{Samtec data (left) and LV power (right) cable.}
\includegraphics[width=3in]{tpcce_samtec_data.pdf}
\includegraphics[width=3in]{tpcce_samtev_lv.pdf}
\end{cdrfigure}

ProtoDUNE will use Samtec 26~AWG twin-axial cable bundles with Samtec HSEC08 connectors to both
the FEMB mezzanine board and the CE flange, shown in Figure~\ref{fig:tpcce_samtec_cable}. The HSEC08
connectors lock into place with tabs on each side of the connector. A sample of the Samtec cable with
THV outer jacket has passed the LAr Materials Test Stand at Fermilab.

The Samtec 26~AWG cable has been
tested and demonstrated to have low enough dispersion that both the LVDS 50~MHz system clock and
1~Gbps high-speed data can be recovered over 25~meters of room temperature (RT) cable, making this
a candidate cable choice for the DUNE far detector. However, for ProtoDUNE only the top APA
layer will be installed, so the cable length between the FEMB and CE flange will be approximately 7~meters.

\begin{cdrfigure}[Results from cable validation testing]{tpcce_samtec_results}{Eye diagrams 
from cable validation testing. {\bf Top Left} 50~MHz system clock over 25~m room temperature 
(RT) Samtec 26AWG cable. For comparison, {\bf Bottom Left} shows the same clock over 
the heavier, more expensive Gore 24AWG cable. {\bf Top Right} 1~Gbps data over 
7~m (ProtoDUNE length) RT Samtec 26AWG cable without active recovery. {\bf Bottom Right} 1~Gbps
data over 25~m (DUNE length) RT Samtec 26AWG cable with active recovery.}
\includegraphics[width=0.9\linewidth]{tpcce_samtec_results.pdf}
\end{cdrfigure}

Figure~\ref{fig:tpcce_samtec_results} shows preliminary results from the DUNE cable 
validation testing. The eye diagrams show the edges of the differential signals after 
LVDS transmission over the specified cable types and lengths. The height of eye diagram shows the size 
of the recovered signal in mV and the slope of the rising and falling edges are jitter in picoseconds (ps). 
An eye diagram is sufficient to show that the edges of the differential signals can
be recovered, but not enough to demonstate the bit error rate (BER). The Samtec 26AWG cable has 
also passed a BER test: transmitting $10^{13}$ bits without error.

\subsubsection{LV Power Cable Bundles}
\label{subsubsec:ce_lvpower_cable}

The LV power will be provided in the LAr from the CE flange to the FEMB by bundles of 16 Samtec 20~AWG 
cable bundles, as shown in Figure~\ref{fig:tpcce_samtec_cable}.

\subsubsection{Wire Bias Cables}
\label{subsubsec:ce_bias_cable}

The wire-bias cables must deliver voltages up to two or three thousand volts with less than a 
couple of milliamps.

The bias voltages are applied to the X, V, and G wire layers, three field cage terminations, 
and an electron diverter, as shown in Figure~\ref{fig:tpcce_cr_board}. The voltages are supplied 
through eight SHV connectors mounted on the CE flange. RG-316 coaxial cables carry the voltages to a patch panel 
mounted on the top end of the APA. From there, bias voltages are carried by single wires to 
various points on the APA frame.

Field cage noise filters are located on a small PC board mounted on or near the patch panel. 
Bias voltage filters are also mounted on or near the electron diverter.

It will be important that all cables and connectors be somewhat rugged,
locking and able to withstand a minimum of several tens of mating cycles.
Unfortunately, because of size and space limitations, the type of connectors we need are not keyed,
so a labeling scheme and caution when connecting cables are the only options available.

\subsection{Warm Interface Electronics}
\label{subsec:warm_interface_elec}

The ProtoDUNE warm interface electronics are housed in a small crate
attached directly to the cryostat flange.  The crate contains one
Power and Timing Card (PTC), up to five Warm Interface Boards (WIBs) and a passive
backplane which fans out signals and LV power from the PTC to the WIBs.

\begin{cdrfigure}[Conceptual design of CE flange]{tpcce_ceflange_sbnd}{Exploded view of 
the CE flange for SBND (ProtoDUNE has 5 WIBs).}
\includegraphics[width=0.9\linewidth]{tpcce_ceflange_sbnd.png}
\end{cdrfigure}

The WIB is the interface between the
DAQ system (based on either the RCE or FELIX) and up to four
FEMBs. It receives the system clock timing and control signals from the
timing system and provides processing and fan-out to the four
FEMBs. The WIB also receives the high-speed data from the four 
FEMBs and transmits it to the DAQ system over optical
fiber.  Figure~\ref{fig:tpcce_ceflange_sbnd} shows the TPC warm electronics
flange (SBND design). The WIBs are attached directly to the TPC
readout electronics flange on the cryostat feed-through. The flange
board is a PCB with connectors to the cold signal and LV cables fitted
between the compression plate on the cryostat side, and sockets for
the WIB on the warm side. Cable strain relief is also provided
directly on the flange, which is mounted vertically to the cryostat
feed-through.

\subsubsection{Power and Timing Card}
\label{subsubsec:power_timing_card}

\begin{cdrfigure}[PTC and timing]{tpcce_wib_timing}{Power and Timing Card (PTC) 
and timing distribution to the WIB and FEMBs.}
\includegraphics[width=0.9\linewidth]{tpcce_wib_timing.jpg}
\end{cdrfigure}

In addition to the WIB, the warm interface electronics contains a
Power and Timing Card and a Power and Timing Backplane
(PTB). The PTC provides a bidirectional fiber interface to the
ProtoDUNE clock system.  The received data is separated into clock and
data using a clock/data separator.  The clock and data
streams are separately fanned-out to five WIB via the power/timing
backplane. Details are shown in
Figure~\ref{fig:tpcce_wib_timing}. The PTC fans the clocks out to the WIB over the
PTB, which is a passive backplane attached directly to the PTC and
WIBs, shown in Figures~\ref{fig:tpcce_ceflange_sbnd} and~\ref{fig:tpcce_dune_ptb}.

\begin{cdrfigure}[WIB and LV power]{tpcce_wib_power}{LV power distribution 
to the WIB and FEMBs. 200W is for a fully-loaded crate 
with the majority of the power dissipated by the 20 cold FEMBs in the LAr.}
\includegraphics[width=0.7\linewidth]{tpcce_wib_power.pdf}
\end{cdrfigure}

The PTC also receives the low voltage power for the entire cold
electronics connected to that flange, approximately 200W at 12V for a
fully-loaded flange (5~WIB + 20~FEMB). The LV power then fanned out
on the PTB to each WIB, which provides the DC/DC conversion and fans
the LV power out to each of the cold FEMBs supplied by that WIB, 
as shown in Figure~\ref{fig:tpcce_wib_power}. The 
majority of the 200W drawn by a full flange is dissipated in the LAr
by the cold FEMB.

ProtoDUNE has 6 cryostat signal feed-throughs with warm interface electronics. 
If the system clock is received by the PTC, it will require 6 dual fiber links.

\subsubsection{Warm Interface Board}
\label{subsubsec:warm_interface_board}

The WIB receives the separated clock and data from the timing system from the backplane
as shown in Figure~\ref{fig:tpcce_dune_wib}. Each WIB in ProtoDUNE will contain a 
unique IP address for its UDP slow control interface. The IP address for the WIB is 
derived from a crate and slot address: the crate address is generated on the PTC 
board via dipswitches and the slot address is generated by the PTB slot, numbered 
from one to five, shown in Figure~\ref{fig:tpcce_dune_ptb}. Note that the WIB also has 
connectors to receive LV power on its front panel, bypassing the PTC.

The WIB is also capable of
receiving the encoded system clock over bi-directional optical
fibers on the front panel; in this scenario, the warm electronics would require 
30 fiber links to the clock system. The clock will be divided by two using either
the FPGA or an on-board clock synthesizer chip to provide the 50~MHz
clock required by the cold electronics.  The clean clock and processed
control stream is fanned out to up to four FEMBs.

\begin{cdrfigure}[Warm Interface Board]{tpcce_dune_wib}{Warm interface board (WIB). Note 
that front panel inputs will include a LEMO connector and alternate inputs for LV power.}
\includegraphics[width=0.9\linewidth]{tpcce_dune_wib.jpg}
\end{cdrfigure}

The FPGA on the WIB is an Altera Arria V GT variant, which requires a
125~MHz clock for its state machine which is provided by crystal
oscillators onboard the WIB. The GT variant of the Arria V
transceivers can drive the high-speed data to the DAQ up to
10.3125~Gbps per link, which is capable of transmitting all data from
two FEMB (2$\times$5~Gbps) on each link. However, the current design is to
use a QSPF socket on the WIB, and deliver 5~Gbps on four optical fibers 
(1 fiber per FEMB) to two RCEs. The FPGA also has Gbps Ethernet
transceiver I/O, also using the 125~MHz clock, which provides
real-time digital data readout to slow control.

\begin{cdrfigure}[Power and timing backplane]{tpcce_dune_ptb}{Power and Timing Backplace (PTB).}
\includegraphics[width=0.7\linewidth]{tpcce_dune_ptb.png}
\end{cdrfigure}

The sync/command signal protocol is currently under development, but
one likely implementation is to send a 25-bit serial word at 50~Mb/s
every 500~ns, with the word encoding one or more of the four commands
described in the COLDATA ASIC specifications:

\begin{enumerate}
  \item CONVERT -- sent every 500ns
  \item CALIBRATE -- generate a calibration pulse using
    previously-programmed parameters
  \item SYNC -- check/reset timestamp counter on COLDATA or cold FPGA
  \item COLDATA\_RESET -- reset all ADCs and the COLDATA or cold FPGA
\end{enumerate}

The protocol for sending these commands to the COLDATA or cold FPGA is
documented in detail in the COLDATA ASIC specification.  The WIB FPGA
will translate the external control protocol described in Section~\ref{sec:daq_time} to the one used by the
COLDATA, so there is reasonable flexibility in the external protocol
which can be accommodated.

The 2~MHz CONVERT clock is distributed by the WIB on up to four differential
links, one to each FEMB, by a zero-delay commercial fan-out chip. The
configure and control signals to the FEMBs are transmitted over two or three
differential I2C links, as described in Section~\ref{subsubsec:ce_data_cable}.

%
%%%%%%%%%%%%%%%%
\subsection{External Power and Cables}
\label{subsec:ce_feedthrough_power}

%
%%%%%%%%%%%%%%%%
\subsubsection{Low Voltage}
\label{subsubsec:ce_feedthrough_wirebias}

\fixme{rewrite this section to be about the LV power and warm cables. See uboone slides for cables/supplies.}

The power-per-channel for the FE electronics is designed be about 25~mW and the total low-voltage
power requirement for each APA is expected to be about 64~W.
Power will be supplied to the electronics on each APA separately by low-noise
power supplies outside the cryostat, either directly by
low-voltage (1.8~V), high-current (36 A) conductors or by high-voltage (48~V)
low-current (2~A) conductors to DC-DC converters placed locally in the LAr.
The use of DC-DC converters requires conductors with smaller cross section,
minimizing heat input to the cryostat (and ice formation on the feedthroughs).
However, the power dissipated by the (somewhat inefficient) converters in
the LAr will create boiling which may introduce contamination directly into the 
high-purity LAr, and if enough LAr is vaporized, may also produce strong mixing of the
ullage gas, driving more impurities into the liquid.
These effects of boiling LAr, unless they can be demonstrated to be harmless,
will drive a preference for eliminating DC-DC converters, and directly powering the front-end readout boards.

Heat conduction through the high-current feedthroughs and the self-heating ($I\cdot R$) of the wires are the factors
contributing to additional heat load on the cryogenic system.
The sum of the these two factors as a function of the wire gauge, however, has a minimum 
due to the two opposing dependencies on the copper-wire cross section.
An optimum wire gauge can be chosen to minimize heat input to the cryostat.

%
%%%%%%%%%%%%%%%%
\subsubsection{Wire-Bias Voltages}
\label{subsubsec:ce_feedthrough_wirebias}

Each anode plane assembly requires three bias voltage connections 
at $+$820V, $-$370V, and $-$665V.
The current on each of these supplies is expected to be zero at normal operation.
However the ripple voltage on the supply must be carefully controlled 
to avoid noise injection into the front-end electronics.  

The power supplies for the wire bias will be similar to 
those used for conventional multi-wire proportional chambers. 
Additional filtering networks will 
be needed to further reduce voltage ripples.  
The default feedthroughs are the commercial SHV type.  
However,  other, higher-density multi-channel 
feedthroughs capable of withstanding the maximum voltage are under investigation.  


%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{QC Procedures}

%%%%%%%%%%%%%%%%
\subsubsection{Prototype Testing}
\label{subsubsec:ce_install_proto}

Dedicated test boards for the FE ASIC and ADC ASIC,
were used to characterize the performance of prototype ASICs at both 300~K and 77~K,
and taking them through multiple thermal cycles.
An automated test board was built for the FE ASIC (Fig.~\ref{tpcce_FE_TestBoard})
to evaluate large numbers of FE ASICs at room temperature,
and another such board is currently being designed for the ADC ASIC.
\begin{cdrfigure}[Power and timing backplane]{tpcce_FE_TestBoard}{Power and Timing Backplace (PTB).}
\includegraphics[width=0.7\linewidth]{tpcce_FE_TestBoard.pdf}
\end{cdrfigure}

\fixme{Get images of the current testboards here.}

The development of the FE and ADC ASICs has proceeded through a series of prototype designs.
A 128-channel prototype analog mother board has been developed and tested in the lab.
Together with an FPGA mezzanine in place of the digital ASIC mezzanine,
they form a FEMB for use in the protoDUNE TPC,
since the COLDATA work is unlikely to be advanced enough to
provide more than a fraction of the electronics needed for the aggressive protoDUNE schedule.
A test stand has been developed to test the FEMB
using a commercial FPGA evaluation board as a mini-DAQ system.
All evaluation test data are stored on a desktop PC and analyzed to
determine whether the board is ready to be installed on the detector.

During the prototype testing, a procedure has been developed for the production test of the cold electronics boards.
This includes key parameters (gain, noise, non-linearity, etc.) that should be tested,
detailed steps of the test to collect data and extract these parameters,
and also the work flows to perform the test at both 300~K and 77~K.

Prototype cold electronics has been tested with prototype TPC and DAQ system,
to evaluate the performance of the APA assembly, and help the development of the DAQ software.
A vertical slice test has been used as the test bed for the integration test.
It is an important step to identify potential issues, check out system integration and performance
before the installation into the cryostat.

%%%%%%%%%%%%%%%%
\subsubsection{Assembly Testing}
\label{subsubsec:ce_install_assembly}

The front-end readout boards will be thoroughly tested. A testing program has been identified:
\begin{itemize}
\item A small number of the ASICs will undergo a complete suite 
of tests, including thermal cycling to determine the batch yield.
\item If the yield is high ($>$ 95\%), all ASICs will be mounted 
on the front-end boards.
Tests will be performed on each board and bad chips replaced as needed.
\item If the yield is not high, an automated test fixture will be 
fabricated to validate every ASIC chip before mounting on the readout boards.
Board-level tests after mounting the ASICs will be conducted.
However, previous experience indicates that this scenario is very unlikely.
\item The fully assembled front-end boards will be thermally cycled multiple times while connected
to a simple DAQ system to ensure reliable operation.
\item After the front-end electronics boards have been installed on an APA,
an initial calibration of all electronic channels will be performed.
The electronic gains and noise levels of all channels will be recorded in a database.
\item Electronic calibration on all channels will be performed while the APA is cold and again after it is warmed up.
Significant differences in the cold and warm calibration results will be investigated and remediated.  
\end{itemize}

%
%%%%%%%%%%%%%%%%
\subsection{Commissioning } 
\label{subsec:ce_install_commission}

During installation, the DAQ system will be running continuously.
As soon as each stack of APAs is connected to the pre-routed cables, 
a suite of calibration runs will be performed to validate that all connections have been made properly.
Repair or replacement at this stage will still be straightforward.

Following the installation of the APAs and the sealing of the cryostat,
another complete test will be performed to verify the integrity of the cold electronics before the filling with argon.
After the cryostat is filled with LAr and the detector is cooled down,
an electronics calibration test will be performed to evaluate
the detector performance prior to data taking.

\fixme{Space-permitting, it seems to me that more details on commissioning would be in order.}
%



